----------
12/28/2016 8:20:56 PM 

----------
# 构建大型网站的其它要素 #

1. 加速静态内容访问速度的CDN
	- CDN是Content Delivery NetWork，内容分发网络。把用户需要的内容分发到用户近的地方
		- 本质上一种网络缓存技术
			- 节省整个广域网的带宽消耗
			- 提升用户访问速度，改进用户体验
	- 浏览器访问网站流程
		- 用户提交域名
		- 浏览器解析域名
		- 得到目标主机IP地址
		- 根据IP地址发送请求
		- 得到请求数据并显示
	- 引入CDN后浏览器访问网站流程
		- 用户向浏览器提交域名
		- 浏览器对域名进行解析，经CDN解析得到该域名对应的CNAME记录
		- 对CNAME再次解析，得到实际IP地址
			- 全局负载均衡
		- 向实际的IP地址的服务器发出访问请求
		- CDN会根据请求内容是否本地缓存进行不同处理
			- 如果存在，则直接返回结果
			- 如果不存在，则CDN请求源站，获取内容，然后返回结果
		- CDN关键技术
			- 全局调度
				- 用户地域
				- 接入运营商
				- CDN机房的负载情况
			- 缓存技术
				- 内存+SSD+机械硬盘混合存储提升整体的缓存容量
				- 做好冷热数据的交换，提升命中率的同时，降低缓存的响应时间
				- 没有命中时，合并请求
				- 新增、变更数据后，CDN预加载，需要源站通知
			- 内容分发
			- 带宽优化
				- 只返回必要数据
				- 更好的压缩算法
2. 大型网站的存储支持
	- 存储
		- 分布式文件系统
			- TFS
			- GFS（Google File System）
				- Client
				- Master
					- 周期性心跳与ChunkServer之间通信，检测对方是否在线
				- ChunkServer
				- 解决了单机文件存储容量及安全性的问题
					- 将多台廉价的PC组成一个大的分布式的看起来想文件系统的集群，并对外提供文件系统的服务，可以满足业务系统对文件存储的需求
			- HDFS（类GFS）
		- NoSQL
			- Key-Value
			- Orederd Key-Value
			- Big Table
			- Document, Full-Text Search
			- Graph
		- 缓存系统
			- Redis
			- Memcache
			- 需考虑问题
				- 缓存和存储数据一致性问题
				- 缓存没有命中和数据更改情况
				- 更新存储中的数据后没有来得及失效缓存的问题
		- NAS网络存储设备
			- IO吞吐性能以及扩展性在大型网站中表现明显不足
	- 计算
		- 搜素系统
			- 爬虫问题
				- 定时从数据源拉取
				- 通过数据变更的通知，及时通知搜索引擎构建索引
			- 倒排索引
			- 查询预处理
			- 相关度计算
		- 数据计算支撑
			- 离线计算
				- MapReduce
				- Hadoop
			- 在线计算
				- Storm
		- 发布系统
			- 分发应用
			- 启动校验
			- 灰度发布
			- 产品版Beta
		- 应用监控系统
			- 数据监视维度
			- 数据记录方式
			- 数据采集方式
			- 展现与告警
		- 依赖管理系统
		- 多机房问题分析
		- 系统容量规划
		- 内部私有云

## 总结 ##
1. 大型网站面临核心问题
	- 数据量
	- 访问量快速膨胀带来的稳定性、性能、成本、效率问题
	- 算法相关问题
2. 分布式作用
	- 应用与应用之间调用
	- 应用之间解耦
	- 应用与底层存储之间的访问问题
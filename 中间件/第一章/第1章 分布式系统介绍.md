
----------
12/19/2016 7:45:17 PM
 
----------
# 第1章 分布式系统介绍 #

1. 分布式系统定义
	- 分布式系统组件分布在网络计算机上
	- 分布式组件之间通过消息传递来通信并协调行动 
2. 分布式系统的意义
	- 升级单机处理能力的性价比越来越低
	- 单机处理能力存在瓶颈
	- 出于稳定性和可用性的考虑
3. 分布式系统基础知识
	- 计算机由输入设备、输出设备、运算器、控制器、存储器（内存和外存）组成 
	- 多线程开发需要处理
		- 线程间的通信
		- 线程并发
		- 线程间的协调工作
	- 网络通信基础
		- ISO的OSI七层模型
			- 应用层
			- 表示层
			- 会话层
			- 传输层
			- 网络层
			- 数据链路层
			- 物理层
		- TCP/IP模型
			- 应用层
			- 传输层
			- 网络层
			- 网络接口层
	- 网络IO实现方式
		- BIO方式
			- Blocking IO，采用阻塞方式实现
				- 建立连接、读数据、写数据的操作都可能会阻塞
		- NIO方式
			- Nonblocing IO
				- 事件驱动思想，采用Reactor模式
		- AIO方式
			- Asynchroneous IO,即异步IO
				- 采用Proactor模式
					- NIO是有通知时可以进行相关操作，如NIO是先通知，再读写
					- AIO是有通知时表示相关操作已经完成，如先读写，再回调CompletionHandler来通知完成
4. 如何把应用从单机扩展到分布式
	- 输入设备的变化
		- 传统意义的输入设备
		- 相互连接的多个节点，接收其它节点传来的信息的节点
	- 输出设备的变化
		- 系统中向其它节点传递信息时的节点
		- 传统意义的人机交互输出设备
	- 控制器的变化
		- 控制器的作用是协调或控制节点的动作和行为
			- 硬件负载均衡设备
			- 软件负载均衡系统（如LVS即Linux虚拟服务器）
				- 透明代理
					- 会增加网络开销
						- 增加流量
						- 增加延迟
					- 与代理紧耦合
						- 需考虑代理服务器的热备份
				- 名称服务直连的方式
					- 请求与处理服务器直连，名称服务记录请求和处理的服务地址（只做地址互换）
					- 透明代理的工作由名称服务与请求发起的服务器处理
					- 名称服务解耦
					- 减少额外带宽和中间路径
					- 升级代码复杂
				- 规则服务器控制路由的请求直连
					- 规则服务器给请求服务器提供规则选择处理服务器
					- 优缺点同名称服务
				- Master + Worker方式
					- Mater节点管理服务，把任务分配给不同的Worker处理
	- 运算器的变化
		- 构成运算器的多个节点在控制器配合下对外提供服务
	- 存储器的变化
		- Master + Worker选择
		- 应用服务器与存储服务器直连
5. 分布式系统的难点
	- 缺乏全局时钟
		- 单独的集群来区分多个动作的顺序
	- 面对故障的独立性
	- 处理单点故障
	- 事务的挑战
		- 两阶段提交(2PC)
		- 最终一致
		- BASE
		- CAP
		- Paxos
		- 。。。